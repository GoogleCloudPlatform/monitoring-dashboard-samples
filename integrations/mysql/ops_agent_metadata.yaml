platforms:
- type: GCE
  launch_stage: GA
  install_documentation_url: !!python/object/new:ruamel.yaml.scalarstring.DoubleQuotedScalarString
    args:
    - https://cloud.google.com/stackdriver/docs/solutions/agents/ops-agent/third-party/mysql
    state: !!python/tuple
    - null
    - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
        state: !!python/tuple
        - null
        - value: null
          always_dump: false
  agent_requirement:
    logs_minimum_supported_version:
      major: '2'
      minor: '5'
      patch: '0'
    metrics_minimum_supported_version:
      major: '2'
      minor: '8'
      patch: '0'
  detections:
    characteristic_log:
      log_name_regex: MySQL
    characteristic_metric:
      metric_type: workload.googleapis.com/mysql.threads
  default_logs:
  - name: mysql_error
    fields:
    - name: jsonPayload.level
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - Log entry level
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.message
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - Log message
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.subsystem
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - MySQL subsystem where the log originated
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.tid
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - Thread ID where the log originated
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.errorCode
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - MySQL error code associated with the log
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
  - name: mysql_general
    fields:
    - name: jsonPayload.message
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - Log of the database action
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.command
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - Type of database action being logged
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.tid
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - Thread ID where the log originated
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
  - name: mysql_slow
    fields:
    - name: jsonPayload.message
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - Full text of the query
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.user
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - User that executed the query
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.database
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - Database where the query was executed
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.host
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - Host of the database instance
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.ipAddress
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - Address of the database instance
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.tid
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - Thread ID where the query was logged
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.queryTime
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The statement execution time in seconds
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.lockTime
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The time to acquire locks in seconds
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.rowsSent
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of rows sent to the client
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.rowsExamined
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of rows examined by the server layer
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.errorNumber
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The statement error number, or 0 if no error occurred
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.killed
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - If the statement was terminated, the error number indicating why, or 0 if
          the statement terminated normally
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.bytesReceived
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of bytes received from all clients
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.bytesSent
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of bytes sent to all clients
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.readFirst
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of times the first entry in an index was read
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.readLast
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of requests to read the last key in an index
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.readKey
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of requests to read a row based on a key
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.readNext
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of requests to read the next row in key order
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.readPrev
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of requests to read the previous row in key order
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.readRnd
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of requests to read a row based on a fixed position
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.readRndNext
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of requests to read the next row in the data file
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.sortMergePasses
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of merge passes that the sort algorithm has had to do
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.sortRangeCount
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of sorts that were done using ranges
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.sortRows
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of sorted rows
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.sortScanCount
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of sorts that were done by scanning the table
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.createdTmpDiskTables
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of internal on-disk temporary tables created by the server
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.createdTmpTables
      type: number
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The number of internal temporary tables created by the server
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.startTime
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The statement execution start time
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
    - name: jsonPayload.endTime
      type: string
      description: !!python/object/new:ruamel.yaml.scalarstring.SingleQuotedScalarString
        args:
        - The statement execution end time
        state: !!python/tuple
        - null
        - _yaml_anchor: !!python/object/new:ruamel.yaml.anchor.Anchor
            state: !!python/tuple
            - null
            - value: null
              always_dump: false
  default_metrics:
  - name: workload.googleapis.com/mysql.buffer_pool_data_pages
    value_type: INT64
    kind: GAUGE
    labels:
    - status
  - name: workload.googleapis.com/mysql.buffer_pool_limit
    value_type: INT64
    kind: GAUGE
    labels: []
  - name: workload.googleapis.com/mysql.buffer_pool_operations
    value_type: INT64
    kind: CUMULATIVE
    labels:
    - operation
  - name: workload.googleapis.com/mysql.buffer_pool_page_flushes
    value_type: INT64
    kind: CUMULATIVE
    labels: []
  - name: workload.googleapis.com/mysql.buffer_pool_pages
    value_type: DOUBLE
    kind: GAUGE
    labels:
    - kind
  - name: workload.googleapis.com/mysql.buffer_pool_size
    value_type: DOUBLE
    kind: GAUGE
    labels:
    - kind
  - name: workload.googleapis.com/mysql.commands
    value_type: INT64
    kind: CUMULATIVE
    labels:
    - command
  - name: workload.googleapis.com/mysql.double_writes
    value_type: INT64
    kind: CUMULATIVE
    labels:
    - kind
  - name: workload.googleapis.com/mysql.handlers
    value_type: INT64
    kind: CUMULATIVE
    labels:
    - kind
  - name: workload.googleapis.com/mysql.locks
    value_type: INT64
    kind: CUMULATIVE
    labels:
    - kind
  - name: workload.googleapis.com/mysql.log_operations
    value_type: INT64
    kind: CUMULATIVE
    labels:
    - operation
  - name: workload.googleapis.com/mysql.operations
    value_type: INT64
    kind: CUMULATIVE
    labels:
    - operation
  - name: workload.googleapis.com/mysql.page_operations
    value_type: INT64
    kind: CUMULATIVE
    labels:
    - operation
  - name: workload.googleapis.com/mysql.row_locks
    value_type: INT64
    kind: CUMULATIVE
    labels:
    - kind
  - name: workload.googleapis.com/mysql.row_operations
    value_type: INT64
    kind: CUMULATIVE
    labels:
    - operation
  - name: workload.googleapis.com/mysql.sorts
    value_type: INT64
    kind: CUMULATIVE
    labels:
    - kind
  - name: workload.googleapis.com/mysql.threads
    value_type: DOUBLE
    kind: GAUGE
    labels:
    - kind
