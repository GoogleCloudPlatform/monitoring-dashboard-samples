exporter_type: sidecar
app_name_short: JVM
app_name: {{app_name_short}}
app_site_name: JVM
app_site_url: https://www.java.com
exporter_name: the JMX exporter
exporter_pkg_name: jmx-exporter
exporter_repo_url: https://github.com/bitnami/containers/tree/main/bitnami/jmx-exporter
dashboard_available: true
minimum_exporter_version: "0.17.0"
multiple_dashboards: false
dashboard_display_name: {{app_name_short}} Prometheus Overview
config_mods: |
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: jvm
  spec:
    selector:
      matchLabels:
  +     app.kubernetes.io/name: jvm
    template:
      metadata:
        labels:
  +       app.kubernetes.io/name: jvm
      spec:
        containers:
        - name: jvm
          image: zookeeper:3.8.0
  +       env:
  +       - name: ZOO_CFG_EXTRA
  +         value: "metricsProvider.className=org.apache.zookeeper.metrics.prometheus.PrometheusMetricsProvider metricsProvider.httpPort=7000 metricsProvider.exportJvmInfo=true"
  +       ports:
  +       - containerPort: 7000
  +         name: prometheus
podmonitoring_config: |
  apiVersion: monitoring.googleapis.com/v1
  kind: PodMonitoring
  metadata:
    name: jvm
    labels:
      app.kubernetes.io/name: jvm
      app.kubernetes.io/part-of: google-cloud-managed-prometheus
  spec:
    endpoints:
  + - port: prometheus
      scheme: http
      interval: 30s
      path: /metrics
    selector:
      matchLabels:
  +     app.kubernetes.io/name: jvm
additional_prereq_info: |
  JVM based applications can be [configured to expose JMX metrics](https://docs.oracle.com/javadb/10.10.1.2/adminguide/radminjmxenabledisable.html){:class=external}.
  This example shows Zookeper's JMX configuration. See your application vendor's documentation for instructions on enabling JMX.
alerts_config: {% includecode content_path="stackdriver/docs/managed-prometheus/exporters/configs/jvm_alerts.yaml" %}
additional_alert_info: You can adjust the alert thresholds to suit your application.
sample_promql_query: up{job="jvm", cluster="{{cluster_name}}", namespace="{{namespace_name}}"}
